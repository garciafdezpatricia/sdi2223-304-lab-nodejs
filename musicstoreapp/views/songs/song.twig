{% extends "layout.twig" %}

{% block title %} Detalles de canción {% endblock %}

{% block main_container %}
	 <div class="row">
		<div class="media col-xs-10">
		  <div class="media-left media-middle">
			<img class="media-object" src="/covers/{{ song._id }}.png" >
		  </div>
		 <h2>{{ song.title }}</h2>
		 <p>{{ song.author }}</p>
		 <p>{{ song.kind }}</p>
			{% if canBuy %}
				<a class="btn btn-primary pull-right" href="/songs/buy/{{ song._id }}">{{ song.price }} €</a>
				{% else %}
					<audio controls>
						<source src="/audios/{{ song._id.toString() }}.mp3" type="audio/mpeg">
					</audio>
			{%  endif %}
		</div>
	  </div>
	<form class="form-horizontal" method="post" action="/comments/{{ song._id }}">
		<label class="control-label col-sm-2" for="title">Comentario:</label>
		<div class="col-sm-10">
			<input id="comment" type="text" name="comment"/>
		</div>
		<div class="col-sm-offset-2 col-sm-10">
			<button type="submit" class="btn btn-primary">Comentar</button>
		</div>
	</form>

	<table class="table table-hover">
		<thead>
		<tr>
			<th>Autor</th>
			<th>Cancion</th>
			<th>Comentario</th>
			<th class="col-md-1"></th>
		</tr>
		</thead>
		<tbody>
		{% for comment in comments %}
			<tr>
				<td>{{ comment.author }}</td>
				<td>{{ comment.song_id }}</td>
				<td>{{ comment.text }}</td>
			</tr>
		{% endfor %}
		</tbody>
	</table>
{% endblock %}